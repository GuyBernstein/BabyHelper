<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - BabyHelper</title>

    <!-- External Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.clouds.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700&family=Lora:wght@400;500;600&display=swap"
          rel="stylesheet">

    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        pastel: {
                            lightest: '#fdf6f0',
                            light: '#ffe8d9',
                            primary: '#ff8c69',
                            primaryHover: '#ff7043',
                            secondary: '#ffd8cc',
                            accent1: '#ffb5a7',
                            accent2: '#fec89a',
                            text: '#6d5d52',
                            textLight: '#938278',
                            heading: '#5c4d44'
                        }
                    },
                    fontFamily: {
                        sans: ['Nunito Sans', 'sans-serif'],
                        serif: ['Lora', 'serif']
                    }
                }
            }
        }
    </script>

    <!-- Consolidated Styles -->
    <style>
        /* Base Styles */
        body {
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }

        /* Background Container */
        #vanta-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        /* Content Container */
        .content-container {
            position: relative;
            z-index: 10;
            background: rgba(253, 246, 240, 0.3);
            min-height: 100vh;
        }

        /* Glass Card Effect */
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 140, 105, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        /* Navigation */
        nav {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        /* Fade Animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out forwards;
        }

        /* Stagger Animation Delays */
        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
        .delay-4 { animation-delay: 0.4s; }
        .delay-5 { animation-delay: 0.5s; }
        .delay-6 { animation-delay: 0.6s; }

        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 140, 105, 0.1);
            border-radius: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 140, 105, 0.5);
            border-radius: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 140, 105, 0.7);
        }

        /* Button Styles */
        .btn {
            transition: all 0.3s ease;
            font-weight: 500;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
        }

        .btn-primary {
            background-color: #ff8c69;
            color: white;
        }

        .btn-primary:hover {
            background-color: #ff7043;
        }

        .btn-outline {
            background-color: white;
            border: 2px solid #ff8c69;
            color: #ff8c69;
        }

        .btn-outline:hover {
            background-color: #ffe8d9;
        }

        .btn-danger {
            background-color: #ef4444;
            color: white;
        }

        .btn-danger:hover {
            background-color: #dc2626;
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            width: 48px;
            height: 24px;
            background-color: #e5e7eb;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .toggle-switch.active {
            background-color: #ff8c69;
        }

        .toggle-switch-handle {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background-color: white;
            border-radius: 50%;
            transition: transform 0.3s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .toggle-switch.active .toggle-switch-handle {
            transform: translateX(24px);
        }

        /* Baby Profile Cards */
        .baby-cards-container {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            padding: 0.5rem 0;
        }

        .baby-card {
            flex: 0 0 280px;
            scroll-snap-align: start;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 1rem;
            padding: 1.5rem;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .baby-card.active {
            border-color: #ff8c69;
            box-shadow: 0 4px 12px rgba(255, 140, 105, 0.3);
        }

        /* Modal Overlay */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        /* Settings List Item */
        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 140, 105, 0.1);
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        /* Time Picker */
        .time-picker {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .time-input {
            width: 60px;
            padding: 0.5rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            text-align: center;
        }

        /* Permission Badge */
        .permission-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background-color: rgba(255, 140, 105, 0.1);
            color: #ff8c69;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* Invite Status */
        .invite-pending {
            background-color: rgba(251, 191, 36, 0.1);
            color: #f59e0b;
        }

        .invite-expired {
            background-color: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }
    </style>
</head>
<body class="bg-transparent text-pastel-text font-sans">
<!-- Vanta Background -->
<div id="vanta-background"></div>

<!-- Main Content -->
<div class="content-container">
    <!-- Navigation Header -->
    <nav class="shadow-sm px-4 md:px-8 py-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <button onclick="window.history.back()"
                    class="flex items-center space-x-2 text-pastel-text hover:text-pastel-primary transition-colors">
                <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
                <span class="font-medium">Back</span>
            </button>
            <h1 class="font-serif text-xl text-pastel-heading">Settings</h1>
            <div class="w-10"></div>
        </div>
    </nav>

    <!-- Scrollable Content Area -->
    <div class="overflow-y-auto custom-scrollbar" style="height: calc(100vh - 72px);">
        <div class="max-w-7xl mx-auto p-4 md:p-8 space-y-6">

            <!-- Profile Management Section -->
            <div class="glass-card fade-in">
                <h3 class="font-serif text-xl font-semibold text-pastel-heading mb-6">Profile Management</h3>
                <div class="flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6">
                    <!-- User Avatar -->
                    <div class="relative">
                        <img src="https://randomuser.me/api/portraits/women/28.jpg"
                             alt="User Avatar"
                             class="w-24 h-24 rounded-full border-4 border-pastel-primary shadow-lg">
                        <button onclick="changeAvatar()" class="absolute bottom-0 right-0 bg-pastel-primary text-white p-2 rounded-full shadow-lg hover:bg-pastel-primaryHover transition-colors">
                            <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                            </svg>
                        </button>
                    </div>

                    <!-- User Details -->
                    <div class="flex-1 space-y-3">
                        <div>
                            <label class="text-sm text-pastel-textLight">Name</label>
                            <input type="text" value="Sarah Johnson" class="w-full px-3 py-2 border border-pastel-light rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-primary">
                        </div>
                        <div>
                            <label class="text-sm text-pastel-textLight">Email (read-only)</label>
                            <input type="email" value="sarah.johnson@email.com" readonly class="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-600">
                        </div>
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-pastel-textLight">Subscription Status</p>
                                <p class="font-semibold text-pastel-primary">Premium Member</p>
                            </div>
                            <button class="text-sm text-pastel-primary hover:text-pastel-primaryHover">Manage</button>
                        </div>
                    </div>
                </div>
                <button onclick="showSignOutDialog()" class="mt-6 w-full btn btn-outline text-red-500 border-red-500 hover:bg-red-50">
                    Sign Out
                </button>
            </div>

            <!-- Baby Profiles -->
            <div class="glass-card fade-in delay-1">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-serif text-xl font-semibold text-pastel-heading">Baby Profiles</h3>
                    <button onclick="addBaby()" class="text-pastel-primary hover:text-pastel-primaryHover">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                        </svg>
                    </button>
                </div>
                <div class="baby-cards-container">
                    <!-- Baby Card 1 - Active -->
                    <div class="baby-card active" onclick="selectBaby(this)">
                        <div class="flex justify-between items-start mb-3">
                            <img src="https://randomuser.me/api/portraits/lego/1.jpg" alt="Emma" class="w-16 h-16 rounded-full">
                            <div class="flex gap-2">
                                <button onclick="editBaby(event, 'Emma')" class="text-pastel-textLight hover:text-pastel-primary">
                                    <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                                    </svg>
                                </button>
                                <button onclick="deleteBaby(event, 'Emma')" class="text-pastel-textLight hover:text-red-500">
                                    <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <h4 class="font-semibold text-pastel-heading">Emma</h4>
                        <p class="text-sm text-pastel-textLight">6 months old</p>
                        <p class="text-xs text-pastel-primary mt-2">Active Profile</p>
                    </div>

                    <!-- Baby Card 2 -->
                    <div class="baby-card" onclick="selectBaby(this)">
                        <div class="flex justify-between items-start mb-3">
                            <img src="https://randomuser.me/api/portraits/lego/2.jpg" alt="Jack" class="w-16 h-16 rounded-full">
                            <div class="flex gap-2">
                                <button onclick="editBaby(event, 'Jack')" class="text-pastel-textLight hover:text-pastel-primary">
                                    <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                                    </svg>
                                </button>
                                <button onclick="deleteBaby(event, 'Jack')" class="text-pastel-textLight hover:text-red-500">
                                    <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <h4 class="font-semibold text-pastel-heading">Jack</h4>
                        <p class="text-sm text-pastel-textLight">3 years old</p>
                    </div>

                    <!-- Add Baby Card -->
                    <div class="baby-card flex items-center justify-center" onclick="addBaby()">
                        <div class="text-center">
                            <div class="w-16 h-16 mx-auto mb-3 bg-pastel-light rounded-full flex items-center justify-center">
                                <svg class="h-8 w-8 text-pastel-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                                </svg>
                            </div>
                            <p class="text-sm font-medium text-pastel-heading">Add Baby</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notifications Preferences -->
            <div class="glass-card fade-in delay-2">
                <h3 class="font-serif text-xl font-semibold text-pastel-heading mb-6">Notifications</h3>
                <div class="space-y-4">
                    <div class="settings-item">
                        <div>
                            <p class="font-medium">Feeding Reminders</p>
                            <p class="text-sm text-pastel-textLight">Get notified for scheduled feedings</p>
                        </div>
                        <div class="toggle-switch active" onclick="toggleSwitch(this)">
                            <div class="toggle-switch-handle"></div>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div>
                            <p class="font-medium">Sleep Tracking</p>
                            <p class="text-sm text-pastel-textLight">Alerts for nap times and bedtime</p>
                        </div>
                        <div class="toggle-switch active" onclick="toggleSwitch(this)">
                            <div class="toggle-switch-handle"></div>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div>
                            <p class="font-medium">Diaper Changes</p>
                            <p class="text-sm text-pastel-textLight">Reminders based on average intervals</p>
                        </div>
                        <div class="toggle-switch" onclick="toggleSwitch(this)">
                            <div class="toggle-switch-handle"></div>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div>
                            <p class="font-medium">Milestone Alerts</p>
                            <p class="text-sm text-pastel-textLight">Updates on upcoming developmental milestones</p>
                        </div>
                        <div class="toggle-switch active" onclick="toggleSwitch(this)">
                            <div class="toggle-switch-handle"></div>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div>
                            <p class="font-medium">Health Checkups</p>
                            <p class="text-sm text-pastel-textLight">Doctor appointment reminders</p>
                        </div>
                        <div class="toggle-switch active" onclick="toggleSwitch(this)">
                            <div class="toggle-switch-handle"></div>
                        </div>
                    </div>
                    <!-- Quiet Hours -->
                    <div class="settings-item">
                        <div>
                            <p class="font-medium">Quiet Hours</p>
                            <p class="text-sm text-pastel-textLight">Silence non-emergency notifications</p>
                        </div>
                        <div class="time-picker">
                            <input type="time" value="22:00" class="time-input">
                            <span class="text-sm">to</span>
                            <input type="time" value="07:00" class="time-input">
                        </div>
                    </div>
                    <!-- Emergency Alerts -->
                    <div class="settings-item">
                        <div>
                            <p class="font-medium">Emergency Alerts</p>
                            <p class="text-sm text-pastel-textLight text-red-500">Always on for safety reasons</p>
                        </div>
                        <div class="toggle-switch active" style="opacity: 0.5; cursor: not-allowed;">
                            <div class="toggle-switch-handle"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Privacy and Security -->
            <div class="glass-card fade-in delay-3">
                <h3 class="font-serif text-xl font-semibold text-pastel-heading mb-6">Privacy & Security</h3>
                <div class="space-y-4">
                    <div class="settings-item">
                        <div>
                            <p class="font-medium">Share Anonymous Data</p>
                            <p class="text-sm text-pastel-textLight">Help improve the app for all parents</p>
                        </div>
                        <div class="toggle-switch" onclick="toggleSwitch(this)">
                            <div class="toggle-switch-handle"></div>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div>
                            <p class="font-medium">Two-Factor Authentication</p>
                            <p class="text-sm text-pastel-textLight">Extra security for your account</p>
                        </div>
                        <button class="text-sm btn btn-outline px-4 py-2">Setup</button>
                    </div>
                    <button class="w-full btn btn-outline mt-4">Export Personal Data</button>
                    <button onclick="showDeleteAccountDialog()" class="w-full btn btn-danger mt-2">Delete Account</button>
                </div>
            </div>

            <!-- Co-parent Management -->
            <div class="glass-card fade-in delay-4">
                <h3 class="font-serif text-xl font-semibold text-pastel-heading mb-6">Co-parent Management</h3>

                <!-- Active Caregivers -->
                <div class="mb-6">
                    <h4 class="font-medium text-pastel-heading mb-3">Active Caregivers</h4>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-pastel-lightest rounded-lg">
                            <div class="flex items-center space-x-3">
                                <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Mike" class="w-10 h-10 rounded-full">
                                <div>
                                    <p class="font-medium">Mike Johnson</p>
                                    <p class="text-sm text-pastel-textLight">mike.j@email.com</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <span class="permission-badge">Full Access</span>
                                <button class="text-red-500 hover:text-red-600">Remove</button>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-pastel-lightest rounded-lg">
                            <div class="flex items-center space-x-3">
                                <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Martha" class="w-10 h-10 rounded-full">
                                <div>
                                    <p class="font-medium">Martha Smith</p>
                                    <p class="text-sm text-pastel-textLight">martha.s@email.com</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <span class="permission-badge">View Only</span>
                                <button class="text-red-500 hover:text-red-600">Remove</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pending Invitations -->
                <div class="mb-4">
                    <h4 class="font-medium text-pastel-heading mb-3">Pending Invitations</h4>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg">
                            <div>
                                <p class="font-medium">john.doe@email.com</p>
                                <p class="text-sm text-pastel-textLight">Invited 2 days ago</p>
                            </div>
                            <div class="flex items-center gap-3">
                                <span class="permission-badge invite-pending">Pending</span>
                                <button class="text-sm text-pastel-primary hover:text-pastel-primaryHover">Resend</button>
                                <button class="text-sm text-red-500 hover:text-red-600">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>

                <button onclick="showInviteDialog()" class="w-full btn btn-primary">Invite New Caregiver</button>
            </div>

            <!-- App Preferences -->
            <div class="glass-card fade-in delay-5">
                <h3 class="font-serif text-xl font-semibold text-pastel-heading mb-6">App Preferences</h3>
                <div class="space-y-4">
                    <div class="settings-item">
                        <p class="font-medium">Theme</p>
                        <select class="px-4 py-2 bg-white border border-pastel-light rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-primary">
                            <option>Light</option>
                            <option>Dark</option>
                            <option>Auto</option>
                        </select>
                    </div>
                    <div class="settings-item">
                        <p class="font-medium">Units</p>
                        <select class="px-4 py-2 bg-white border border-pastel-light rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-primary">
                            <option>Metric</option>
                            <option>Imperial</option>
                        </select>
                    </div>
                    <div class="settings-item">
                        <p class="font-medium">Language</p>
                        <select class="px-4 py-2 bg-white border border-pastel-light rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-primary">
                            <option>English</option>
                            <option>Spanish</option>
                            <option>French</option>
                            <option>German</option>
                        </select>
                    </div>
                    <div class="settings-item">
                        <p class="font-medium">Default Feeding Timer</p>
                        <select class="px-4 py-2 bg-white border border-pastel-light rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-primary">
                            <option>15 minutes</option>
                            <option>20 minutes</option>
                            <option>30 minutes</option>
                            <option>No timer</option>
                        </select>
                    </div>
                    <div class="settings-item">
                        <p class="font-medium">Default Sleep Timer</p>
                        <select class="px-4 py-2 bg-white border border-pastel-light rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-primary">
                            <option>30 minutes</option>
                            <option>1 hour</option>
                            <option>2 hours</option>
                            <option>No timer</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Support and Feedback -->
            <div class="glass-card fade-in delay-6">
                <h3 class="font-serif text-xl font-semibold text-pastel-heading mb-6">Support & Feedback</h3>
                <div class="space-y-3">
                    <button class="w-full p-4 text-left bg-pastel-lightest rounded-lg hover:bg-pastel-light transition-colors flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <svg class="h-6 w-6 text-pastel-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                            </svg>
                            <span class="font-medium">Help Center</span>
                        </div>
                        <svg class="h-5 w-5 text-pastel-textLight" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                    <button class="w-full p-4 text-left bg-pastel-lightest rounded-lg hover:bg-pastel-light transition-colors flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <svg class="h-6 w-6 text-pastel-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                            </svg>
                            <span class="font-medium">Contact Support</span>
                        </div>
                        <svg class="h-5 w-5 text-pastel-textLight" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                    <button onclick="showFeedbackDialog()" class="w-full p-4 text-left bg-pastel-lightest rounded-lg hover:bg-pastel-light transition-colors flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <svg class="h-6 w-6 text-pastel-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"/>
                            </svg>
                            <span class="font-medium">Send Feedback</span>
                        </div>
                        <svg class="h-5 w-5 text-pastel-textLight" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                    <button class="w-full p-4 text-left bg-pastel-lightest rounded-lg hover:bg-pastel-light transition-colors flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <svg class="h-6 w-6 text-pastel-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                            </svg>
                            <span class="font-medium">Rate App</span>
                        </div>
                        <svg class="h-5 w-5 text-pastel-textLight" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- Modal Overlays -->

<!-- Sign Out Confirmation Dialog -->
<div id="signOutDialog" class="modal-overlay">
    <div class="modal-content">
        <h3 class="font-serif text-xl font-semibold text-pastel-heading mb-4">Sign Out?</h3>
        <p class="text-pastel-text mb-6">Are you sure you want to sign out of your account?</p>
        <div class="flex gap-3">
            <button onclick="closeModal('signOutDialog')" class="flex-1 btn btn-outline">Cancel</button>
            <button class="flex-1 btn btn-primary">Sign Out</button>
        </div>
    </div>
</div>

<!-- Delete Account Dialog -->
<div id="deleteAccountDialog" class="modal-overlay">
    <div class="modal-content">
        <h3 class="font-serif text-xl font-semibold text-red-600 mb-4">Delete Account</h3>
        <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-4">
            <p class="text-sm text-red-800">
                <strong>Warning:</strong> This action cannot be undone. All your data, including baby profiles, photos, and tracking history will be permanently deleted.
            </p>
        </div>
        <p class="text-pastel-text mb-4">Please type <strong>DELETE</strong> to confirm:</p>
        <input type="text" id="deleteConfirmInput" class="w-full px-3 py-2 border border-red-300 rounded-lg mb-6 focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="Type DELETE">
        <div class="flex gap-3">
            <button onclick="closeModal('deleteAccountDialog')" class="flex-1 btn btn-outline">Cancel</button>
            <button onclick="confirmDeleteAccount()" class="flex-1 btn btn-danger" disabled id="deleteAccountBtn">Delete Account</button>
        </div>
    </div>
</div>

<!-- Invite Caregiver Dialog -->
<div id="inviteDialog" class="modal-overlay">
    <div class="modal-content">
        <h3 class="font-serif text-xl font-semibold text-pastel-heading mb-4">Invite Caregiver</h3>
        <div class="space-y-4">
            <div>
                <label class="text-sm text-pastel-textLight">Email Address</label>
                <input type="email" class="w-full px-3 py-2 border border-pastel-light rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-primary" placeholder="caregiver@email.com">
            </div>
            <div>
                <label class="text-sm text-pastel-textLight">Permission Level</label>
                <select class="w-full px-3 py-2 border border-pastel-light rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-primary">
                    <option>Full Access - Can add/edit data</option>
                    <option>View Only - Can only view data</option>
                </select>
            </div>
            <div>
                <label class="text-sm text-pastel-textLight">Message (optional)</label>
                <textarea class="w-full px-3 py-2 border border-pastel-light rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-primary" rows="3" placeholder="Hi! I'd like to invite you to help track Emma's activities..."></textarea>
            </div>
        </div>
        <div class="flex gap-3 mt-6">
            <button onclick="closeModal('inviteDialog')" class="flex-1 btn btn-outline">Cancel</button>
            <button class="flex-1 btn btn-primary">Send Invitation</button>
        </div>
    </div>
</div>

<!-- Feedback Dialog -->
<div id="feedbackDialog" class="modal-overlay">
    <div class="modal-content">
        <h3 class="font-serif text-xl font-semibold text-pastel-heading mb-4">Send Feedback</h3>
        <div class="space-y-4">
            <div>
                <label class="text-sm text-pastel-textLight">Feedback Type</label>
                <select class="w-full px-3 py-2 border border-pastel-light rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-primary">
                    <option>Feature Request</option>
                    <option>Bug Report</option>
                    <option>General Feedback</option>
                    <option>Compliment</option>
                </select>
            </div>
            <div>
                <label class="text-sm text-pastel-textLight">Your Feedback</label>
                <textarea class="w-full px-3 py-2 border border-pastel-light rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-primary" rows="5" placeholder="Tell us what you think..."></textarea>
            </div>
            <div class="flex items-center">
                <input type="checkbox" id="followUp" class="mr-2">
                <label for="followUp" class="text-sm text-pastel-text">I'd like to be contacted about this feedback</label>
            </div>
        </div>
        <div class="flex gap-3 mt-6">
            <button onclick="closeModal('feedbackDialog')" class="flex-1 btn btn-outline">Cancel</button>
            <button class="flex-1 btn btn-primary">Send Feedback</button>
        </div>
    </div>
</div>

<script src="../js/auth.js" data-auto-init="true"></script>
<script>
    /**
     * Initialize Vanta Clouds Background
     */
    window.addEventListener('DOMContentLoaded', () => {
        const initVanta = () => {
            if (window.VANTA && window.THREE) {
                try {
                    window.vantaEffect = VANTA.CLOUDS({
                        el: "#vanta-background",
                        mouseControls: true,
                        touchControls: true,
                        gyroControls: false,
                        minHeight: 200.00,
                        minWidth: 200.00,
                        backgroundColor: 0xff8c69,
                        skyColor: 0xffe8d9,
                        cloudColor: 0xffaa88,
                        cloudShadowColor: 0xff8866,
                        sunColor: 0xffa066,
                        sunGlareColor: 0xffd4c4,
                        sunlightColor: 0xffc8b8,
                        speed: 0.70,
                        zoom: 1
                    });
                } catch (e) {
                    console.error('Failed to initialize Vanta:', e);
                }
            } else {
                setTimeout(initVanta, 100);
            }
        };
        initVanta();
    });

    // Clean up on page unload
    window.addEventListener('beforeunload', () => {
        if (window.vantaEffect) {
            window.vantaEffect.destroy();
        }
    });

    /**
     * Toggle Switch Handler
     */
    function toggleSwitch(element) {
        if (element.style.cursor === 'not-allowed') return;
        element.classList.toggle('active');
    }

    /**
     * Baby Profile Selection
     */
    function selectBaby(card) {
        document.querySelectorAll('.baby-card').forEach(c => c.classList.remove('active'));
        card.classList.add('active');
    }

    /**
     * Modal Functions
     */
    function showModal(modalId) {
        document.getElementById(modalId).classList.add('active');
    }

    function closeModal(modalId) {
        document.getElementById(modalId).classList.remove('active');
    }

    function showSignOutDialog() {
        showModal('signOutDialog');
    }

    function showDeleteAccountDialog() {
        showModal('deleteAccountDialog');
    }

    function showInviteDialog() {
        showModal('inviteDialog');
    }

    function showFeedbackDialog() {
        showModal('feedbackDialog');
    }

    /**
     * Delete Account Confirmation
     */
    document.getElementById('deleteConfirmInput')?.addEventListener('input', function(e) {
        const deleteBtn = document.getElementById('deleteAccountBtn');
        deleteBtn.disabled = e.target.value !== 'DELETE';
    });

    function confirmDeleteAccount() {
        if (document.getElementById('deleteConfirmInput').value === 'DELETE') {
            alert('Account deletion would be processed here');
            closeModal('deleteAccountDialog');
        }
    }

    /**
     * Baby Profile Actions
     */
    function addBaby() {
        alert('Add baby form would open here');
    }

    function editBaby(event, name) {
        event.stopPropagation();
        alert(`Edit ${name}'s profile`);
    }

    function deleteBaby(event, name) {
        event.stopPropagation();
        if (confirm(`Remove ${name}'s profile? This cannot be undone.`)) {
            alert(`${name}'s profile would be deleted`);
        }
    }

    /**
     * User Avatar Change
     */
    function changeAvatar() {
        alert('File picker for avatar would open here');
    }

    /**
     * Close modals on outside click
     */
    document.querySelectorAll('.modal-overlay').forEach(modal => {
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.classList.remove('active');
            }
        });
    });
</script>
</body>
</html>