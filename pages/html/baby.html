<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emma's Profile - BabyHelper</title>

    <!-- External Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.clouds.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700&family=Lora:wght@400;500;600&display=swap"
          rel="stylesheet">

    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        pastel: {
                            lightest: '#fdf6f0',
                            light: '#ffe8d9',
                            primary: '#ff8c69',
                            primaryHover: '#ff7043',
                            secondary: '#ffd8cc',
                            accent1: '#ffb5a7',
                            accent2: '#fec89a',
                            text: '#6d5d52',
                            textLight: '#938278',
                            heading: '#5c4d44'
                        }
                    },
                    fontFamily: {
                        sans: ['Nunito Sans', 'sans-serif'],
                        serif: ['Lora', 'serif']
                    }
                }
            }
        }
    </script>

    <!-- Consolidated Styles -->
    <style>
        /* Base Styles */
        body {
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }

        /* Background Container - Updated for better visibility */
        #vanta-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        /* Content Container - Reduced opacity for better cloud visibility */
        .content-container {
            position: relative;
            z-index: 10;
            /* Changed from 0.85 to 0.3 opacity for much better cloud visibility */
            background: rgba(253, 246, 240, 0.3);
            min-height: 100vh;
        }

        /* Reusable Glass Card Effect - Enhanced for better contrast */
        .glass-card {
            /* Increased opacity and blur for better readability */
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 140, 105, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        /* Navigation with stronger background */
        nav {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        /* Simple Fade Animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out forwards;
        }

        /* Stagger Animation Delays */
        .delay-1 {
            animation-delay: 0.1s;
        }

        .delay-2 {
            animation-delay: 0.2s;
        }

        .delay-3 {
            animation-delay: 0.3s;
        }

        .delay-4 {
            animation-delay: 0.4s;
        }

        .delay-5 {
            animation-delay: 0.5s;
        }

        /* Milestone Timeline */
        .milestone-line {
            background: linear-gradient(to bottom, #ff8c69, transparent);
            width: 2px;
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
        }

        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 140, 105, 0.1);
            border-radius: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 140, 105, 0.5);
            border-radius: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 140, 105, 0.7);
        }

        /* Image Hover Effect */
        .hover-scale {
            transition: transform 0.3s ease;
        }

        .hover-scale:hover {
            transform: scale(1.1);
        }

        /* Button Base Styles */
        .btn {
            transition: all 0.3s ease;
            font-weight: 500;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
        }

        .btn-primary {
            background-color: #ff8c69;
            color: white;
        }

        .btn-primary:hover {
            background-color: #ff7043;
        }

        .btn-outline {
            background-color: white;
            border: 2px solid #ff8c69;
            color: #ff8c69;
        }

        .btn-outline:hover {
            background-color: #ffe8d9;
        }

        /* Caregiver items with better background */
        .caregiver-item {
            background: rgba(253, 246, 240, 0.8) !important;
        }
    </style>
</head>
<body class="bg-transparent text-pastel-text font-sans">
<!-- Vanta Background -->
<div id="vanta-background"></div>

<!-- Main Content -->
<div class="content-container">
    <!-- Navigation Header -->
    <nav class="shadow-sm px-4 md:px-8 py-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <button onclick="window.history.back()"
                    class="flex items-center space-x-2 text-pastel-text hover:text-pastel-primary transition-colors">
                <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
                <span class="font-medium">Back</span>
            </button>
            <h1 class="font-serif text-xl text-pastel-heading">Emma's Profile</h1>
            <button class="p-2 rounded-full hover:bg-pastel-light transition-colors">
                <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
            </button>
        </div>
    </nav>

    <!-- Scrollable Content Area -->
    <div class="overflow-y-auto custom-scrollbar" style="height: calc(100vh - 72px);">
        <div class="max-w-7xl mx-auto p-4 md:p-8 space-y-6">

            <!-- Baby Information Card -->
            <div class="glass-card fade-in">
                <div class="flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6">
                    <!-- Profile Photo -->
                    <div class="relative">
                        <img src="https://randomuser.me/api/portraits/lego/1.jpg"
                             alt="Emma"
                             class="w-32 h-32 rounded-full border-4 border-pastel-primary shadow-lg">
                        <button class="absolute bottom-0 right-0 bg-pastel-primary text-white p-2 rounded-full shadow-lg hover:bg-pastel-primaryHover transition-colors">
                            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/>
                            </svg>
                        </button>
                    </div>

                    <!-- Baby Details -->
                    <div class="flex-1 text-center md:text-left">
                        <h2 class="font-serif text-3xl font-semibold text-pastel-heading mb-2">Emma Johnson</h2>
                        <div class="space-y-2">
                            <p class="text-pastel-textLight">Born: January 15, 2024</p>
                            <p class="text-pastel-textLight">Age: 6 months, 12 days</p>
                            <div class="flex flex-wrap gap-2 justify-center md:justify-start mt-3">
                                <span class="px-3 py-1 bg-pastel-secondary rounded-full text-sm font-medium">7.2 kg</span>
                                <span class="px-3 py-1 bg-pastel-accent1 bg-opacity-30 rounded-full text-sm font-medium">68 cm</span>
                                <span class="px-3 py-1 bg-pastel-accent2 bg-opacity-30 rounded-full text-sm font-medium">Blood Type: O+</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="grid grid-cols-2 gap-4 w-full md:w-auto">
                        <div class="text-center p-4 bg-white bg-opacity-80 rounded-lg">
                            <p class="text-2xl font-bold text-pastel-primary">142</p>
                            <p class="text-sm text-pastel-textLight">Total Feedings</p>
                        </div>
                        <div class="text-center p-4 bg-white bg-opacity-80 rounded-lg">
                            <p class="text-2xl font-bold text-pastel-accent1">89%</p>
                            <p class="text-sm text-pastel-textLight">Sleep Quality</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Growth Chart -->
            <div class="glass-card fade-in delay-1">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-serif text-xl font-semibold text-pastel-heading">Growth Progress</h3>
                    <select class="px-4 py-2 bg-white border border-pastel-light rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-pastel-primary">
                        <option>Weight</option>
                        <option>Height</option>
                        <option>Head Circumference</option>
                    </select>
                </div>
                <div class="relative h-64">
                    <canvas id="growthChart"></canvas>
                </div>
                <div class="mt-4 text-center">
                    <p class="text-sm text-pastel-textLight">
                        Emma is in the <span class="font-semibold text-pastel-primary">75th percentile</span> for weight
                    </p>
                </div>
            </div>

            <!-- Milestones Timeline -->
            <div class="glass-card fade-in delay-2">
                <h3 class="font-serif text-xl font-semibold text-pastel-heading mb-6">Milestone Timeline</h3>
                <div class="relative">
                    <div class="milestone-line"></div>
                    <div class="space-y-6 relative">
                        <!-- Completed Milestones -->
                        <div class="milestone-item flex items-start space-x-4">
                            <div class="w-10 h-10 bg-pastel-primary rounded-full flex items-center justify-center text-white font-bold relative z-10">
                                ✓
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-pastel-heading">First Smile</h4>
                                <p class="text-sm text-pastel-textLight">February 20, 2024 - 5 weeks old</p>
                                <p class="text-sm mt-1">Emma gave us her first real smile today! 😊</p>
                            </div>
                        </div>

                        <div class="milestone-item flex items-start space-x-4">
                            <div class="w-10 h-10 bg-pastel-primary rounded-full flex items-center justify-center text-white font-bold relative z-10">
                                ✓
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-pastel-heading">Rolling Over</h4>
                                <p class="text-sm text-pastel-textLight">April 15, 2024 - 3 months old</p>
                                <p class="text-sm mt-1">First successful roll from tummy to back!</p>
                            </div>
                        </div>

                        <!-- Upcoming Milestone -->
                        <div class="milestone-item flex items-start space-x-4 opacity-50">
                            <div class="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center text-white relative z-10">
                                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                          d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-pastel-heading">Sitting Without Support</h4>
                                <p class="text-sm text-pastel-textLight">Expected around 6-8 months</p>
                                <p class="text-sm mt-1">Keep practicing tummy time!</p>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="mt-6 w-full btn btn-primary">Add New Milestone</button>
            </div>

            <!-- Photo Gallery -->
            <div class="glass-card fade-in delay-3">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-serif text-xl font-semibold text-pastel-heading">Photo Memories</h3>
                    <button class="text-pastel-primary hover:text-pastel-primaryHover transition-colors">View All
                    </button>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <!-- Photo Items -->
                    <div class="aspect-square rounded-lg overflow-hidden">
                        <img src="https://picsum.photos/200/200?random=1" alt="Baby photo"
                             class="w-full h-full object-cover hover-scale">
                    </div>
                    <div class="aspect-square rounded-lg overflow-hidden">
                        <img src="https://picsum.photos/200/200?random=2" alt="Baby photo"
                             class="w-full h-full object-cover hover-scale">
                    </div>
                    <div class="aspect-square rounded-lg overflow-hidden">
                        <img src="https://picsum.photos/200/200?random=3" alt="Baby photo"
                             class="w-full h-full object-cover hover-scale">
                    </div>
                    <!-- Add Photo Button -->
                    <div class="aspect-square rounded-lg bg-white bg-opacity-80 flex items-center justify-center cursor-pointer hover:bg-pastel-secondary transition-colors">
                        <svg class="h-12 w-12 text-pastel-primary" fill="none" viewBox="0 0 24 24"
                             stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Caregivers Management -->
            <div class="glass-card fade-in delay-4">
                <h3 class="font-serif text-xl font-semibold text-pastel-heading mb-6">Caregivers</h3>
                <div class="space-y-4">
                    <!-- Caregiver List -->
                    <div class="caregiver-item flex items-center justify-between p-4 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <img src="https://randomuser.me/api/portraits/women/28.jpg" alt="Parent"
                                 class="w-10 h-10 rounded-full">
                            <div>
                                <p class="font-medium text-pastel-heading">Sarah Johnson</p>
                                <p class="text-sm text-pastel-textLight">Parent • Full access</p>
                            </div>
                        </div>
                        <span class="text-xs text-pastel-textLight">You</span>
                    </div>

                    <div class="caregiver-item flex items-center justify-between p-4 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Parent"
                                 class="w-10 h-10 rounded-full">
                            <div>
                                <p class="font-medium text-pastel-heading">Mike Johnson</p>
                                <p class="text-sm text-pastel-textLight">Parent • Full access</p>
                            </div>
                        </div>
                        <button class="text-sm text-red-500 hover:text-red-600 transition-colors">Remove</button>
                    </div>

                    <div class="caregiver-item flex items-center justify-between p-4 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Grandparent"
                                 class="w-10 h-10 rounded-full">
                            <div>
                                <p class="font-medium text-pastel-heading">Martha Smith</p>
                                <p class="text-sm text-pastel-textLight">Grandparent • View only</p>
                            </div>
                        </div>
                        <button class="text-sm text-red-500 hover:text-red-600 transition-colors">Remove</button>
                    </div>
                </div>
                <button class="mt-6 w-full btn btn-outline">Invite New Caregiver</button>
            </div>
        </div>
    </div>
</div>

<script src="../js/auth.js" data-auto-init="true"></script>
<script>
    /**
     * Initialize Vanta Clouds Background
     */
    window.addEventListener('DOMContentLoaded', () => {
        // Ensure Three.js is loaded before initializing Vanta
        const initVanta = () => {
            if (window.VANTA && window.THREE) {
                try {
                    window.vantaEffect = VANTA.CLOUDS({
                        el: "#vanta-background",
                        mouseControls: true,
                        touchControls: true,
                        gyroControls: false,
                        minHeight: 200.00,
                        minWidth: 200.00,
                        // colors for contrast with pastel theme
                        backgroundColor: 0xff8c69,  // Pastel lightest as base
                        skyColor: 0xffe8d9,         // Slightly darker pastel
                        cloudColor: 0xffaa88,       // saturated cloud color for visibility
                        cloudShadowColor: 0xff8866, // Dark cloud shadows
                        sunColor: 0xffa066,         // visible sun
                        sunGlareColor: 0xffd4c4,
                        sunlightColor: 0xffc8b8,
                        speed: 0.70,
                        zoom: 1                     // Default zoom
                    });
                } catch (e) {
                    console.error('Failed to initialize Vanta:', e);
                }
            } else {
                // Retry after a short delay if libraries aren't loaded
                setTimeout(initVanta, 100);
            }
        };
        initVanta();
    });

    // Clean up on page unload
    window.addEventListener('beforeunload', () => {
        if (window.vantaEffect) {
            window.vantaEffect.destroy();
        }
    });


    /**
     * Initialize Growth Chart
     * Uses Chart.js for data visualization
     */
    function initGrowthChart() {
        const ctx = document.getElementById('growthChart').getContext('2d');
        const chartData = {
            labels: ['Birth', '1 month', '2 months', '3 months', '4 months', '5 months', '6 months'],
            datasets: [{
                label: 'Weight (kg)',
                data: [3.2, 4.1, 5.0, 5.8, 6.4, 6.9, 7.2],
                borderColor: '#ff8c69',
                backgroundColor: 'rgba(255, 140, 105, 0.1)',
                tension: 0.4,
                borderWidth: 3,
                pointRadius: 6,
                pointBackgroundColor: '#ff8c69',
                pointBorderColor: '#fff',
                pointBorderWidth: 2
            }, {
                label: '50th Percentile',
                data: [3.3, 4.5, 5.6, 6.4, 7.0, 7.6, 8.0],
                borderColor: '#ffb5a7',
                borderDash: [5, 5],
                borderWidth: 2,
                pointRadius: 0,
                fill: false
            }]
        };

        const chartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {display: false},
                tooltip: {
                    backgroundColor: 'rgba(255, 255, 255, 0.9)',
                    titleColor: '#5c4d44',
                    bodyColor: '#6d5d52',
                    borderColor: '#ff8c69',
                    borderWidth: 1,
                    padding: 12,
                    cornerRadius: 8,
                    displayColors: false
                }
            },
            scales: {
                x: {
                    grid: {display: false},
                    ticks: {
                        color: '#938278',
                        font: {family: 'Nunito Sans'}
                    }
                },
                y: {
                    grid: {
                        color: 'rgba(255, 140, 105, 0.1)',
                        borderDash: [3, 3]
                    },
                    ticks: {
                        color: '#938278',
                        font: {family: 'Nunito Sans'}
                    }
                }
            }
        };

        new Chart(ctx, {
            type: 'line',
            data: chartData,
            options: chartOptions
        });
    }

    // Initialize components when DOM is ready
    document.addEventListener('DOMContentLoaded', function () {
        initGrowthChart();
    });
</script>
</body>
</html>